.. index::
   single: Linux; 

Linux
===================

Commande Généraliste  
-------------------
::

   Etre en “root” : sudo su 
   lister les dossiers : ls
   entrer dans un dossier : cd xxx
   retour dans le dossier précédent  : cd ..
   Supprimer un dossier : sudo rmdir xxx
   supprimer un fichier : sudo rm xxx
   Supprimer un répertoire plein : rm -Rf xxx
   lire le contenu d'un fichier texte : cat
   donner une autorisation à un fichier : sudo chmod 777 php.ini ou dev/log
   Faire du SSH : ssh dev@127.0.0.1 -p 2222 ( accès SSH ) 
   Lancer un .sh : sh start_moonlander2.sh

Edition de fichier 
-------------------
( nano ) : nano <fichier>( ctrl O + ctrl X pour sauver et quitter ) 
( vim) : vim<fichier>( I pour INSERT, ECHAP puis :wq)

Telecharger un archive avec un lien : 
::

   wget // ( wget <lien>  ) ( apt-get install wget ) 
   tar -C / usr / local -xzf nom_complet archive // Décompresser une archive a un endroit   
   sudo apt update && sudo apt upgrade //Mettre à jour le système 
   sudo apt-get remove <paquet> && sudo apt-get install <paquet> -V <version> // changer la version d’un package 
   sudo lsof -i:80 // Regarder ce qui utilise un port : 

Instalation de paquet
---------------------------
::

   sudo apt-get update
   sudo apt-get upgrade -y
   cd ~
   wget https://github.com/jstefanop/bfgminer/releases/download/bfgminer-5.4.2-futurebit2-beta2/bfgminer_5.4.2-futurebit2_linux_armv6.tar.gz // installer un .gz
   tar -xzf bfgminer_5.4.2-futurebit2_linux_armv6.tar.gz // décompresser avec le nom de l'archive
   chmod -R +x bfgminer_5.4.2-futurebit2_linux_armv6 // donner droit
   cd bfgminer_5.4.2-futurebit2_linux_armv6 // Rentrer dans le dossier du paquet
   ./start_moonlander2 // faire les commande voulu a l'intérieur 

Scanner un réseau
-------------------

Nmap
-------------------
::
   Information sur une IP : nmap 192.168.1.1
   Ip sur  réseau avec le nom :  nmap -sL 192.168.1.1/24
   Scanner une machine : nmap -A 192.168.1.45


Installation serveur web 
-------------------------

Un serveur web est un système capable de supporter des sites web de tout types avec des technologie différentes. 
technologie appréciée : PHP/SQL/Apache/phpmyadmin/Xdebug/ACL/Composer/zip/unzip/Git/php-intl/php-fpm/php-cli/php-xml/php-curl

réinitialiser mots de passe mysql :
::

   mysql -u root -p mysql

Regarder les logs Nginx :
::

   systemctl status nginx.service

Créer un user SQL et transférer ses droits :
::
   CREATE USER 'user1'@'localhost' IDENTIFIED BY '000000';
   GRANT ALL PRIVILEGES ON * . * TO 'user1'@'localhost';
   FLUSH PRIVILEGES;


man in the middle attack SSH problem: 
::
   ; remove key if there are a middle man attack
   ;ssh-keygen -f "/root/.ssh/known_hosts" -R "164.132.105.114"
   ; or command: export ANSIBLE_HOST_KEY_CHECKING=False on 2 machine


Création web : 
-------------------

installer easy engine :wget -qO ee rt.cx/ee && sudo bash ee
creer un site : ee site create example.com --php7 --mysql
avoir une structure Wordpress : ee site update exemple.com --wp

Probléme clé SSH : 
ssh-keygen -R IpduServer 
Se connecter sur la machine voulu 



Parametrer linux pour la simplicité
===================

utiliser linux sur windows
---------------------------

::
   Windows + R 
   > bash

Changer le fichier d'arrivé de linux 
- acceder a ~/.bashrc
- ajouter la ligne cd /mon/dossier/arriver/..


Créer un ScriptPowerShell
---------------------------


Distribution annexe
====================

spécificité de Manjaro
-------------------

Synchroniser les dépots :
::
   $sudo pacman -Syy

Mise a jour  : 
::

   $sudo pacman -Syu

Installer un paquet : 
::

   $sudo pacman -S composer
   
installer une surcouche à octopi  :
::

   $sudo pacman -S trizen ( permet d’avoir des librairie privé ) 

spécificité de Debian
-------------------

spécificité de KaliLinux
-------------------


spécificité de DietPi 
-------------------
`Site DietPi`_
Commande dietpi : 
::

   dietpi-launcher (Select and Run any of the DietPi programs, all from one place.) ( Menu config)
   dietpi-config (Feature rich configuration tool for your device) 
   dietpi-software (Install optimized and ready to run software)
   dietpi-uninstall (Allows you to uninstall DietPi software) 
   dietpi-update (Update your version of DietPi)
   dietpi-backup -(Backup or restore your DietPi system)
   dietpi-sync - (Allows you to sync/duplicate one directory to another).
   dietpi-services - (Takes control of software services, enabling DietPi a method of quick service control).
   dietpi-process_tool - (Tweak system wide nice/priority levels, for most software and processes).
   dietpi-cleaner (Remove unwanted "junk" from your DietPi system and free up filesystem space)
   dietpi-bugreport (Sends a bug report to DietPi)
   dietpi-cron (Allows you to modify all start times for Cron Jobs)
   dietpi-logclear (Keep ontop of your log files, features clearing and backup modes).
   dietpi-morsecode (Converts a text file to morse code, then outputs to your screen)
   dietpi-letsencrypt (Frontend for Lets Encrypt and DietPi integration)
   htop (The only resource monitor you'll ever need)
   DietPi-Ramlog #1 (Mounts /var/log to RAM. Saves your SD card writes, and, uses less than 0.1mb~ of RAM).
   Dropbear (Lightweight SSH server)

Configuration : 

`Configuration DietPi`_
`Autre lien DietPi config`_
Voir en général le lancement : dietpi-launcher
Voir les config : dietpi-config
optimiser software : dietpi-software
Run the update : dietpi-update
voir les ressource moniteur : htop
Voir le cpu : cpu 


Tuto Projet Raspberry   
-------------------
`Miner avec un futurebit`_



.. _`Miner avec un futurebit`: https://medium.com/@david_senate/running-a-super-low-cost-digibyte-scrypt-miner-rig-with-a-raspberry-pi-3-model-b-and-a-futurebit-14dd7d95e566
.. _`Autre lien DietPi config`: http://dietpi.com/phpbb/viewtopic.php?f=8&t=5#p5
.. _`Configuration DietPi`: http://blog.choum.ca/20170819-dietpi-configuration-de-base
.. _`Site DietPi`: https://dietpi.com/#noAction
